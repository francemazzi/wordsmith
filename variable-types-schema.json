{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Wordsmith Variable Types Schema",
  "description": "Schema per mappare le tipologie di variabili wordsmith-ts nel frontend",
  "definitions": {
    "variableTypes": {
      "type": "object",
      "properties": {
        "SIMPLE_TEXT": {
          "id": "SIMPLE_TEXT",
          "name": "Testo Semplice",
          "description": "Variabile testuale singola",
          "syntax": "{{nomeVariabile}}",
          "category": "text",
          "formFieldType": "text",
          "dataType": "string",
          "example": "{{name}}",
          "mapping": {
            "questionType": "text",
            "responseType": "string"
          }
        },
        "OBJECT_PROPERTY": {
          "id": "OBJECT_PROPERTY",
          "name": "Proprietà Oggetto",
          "description": "Accesso a proprietà di oggetti annidati",
          "syntax": "{{oggetto.proprietà}}",
          "category": "text",
          "formFieldType": "object",
          "dataType": "object",
          "example": "{{user.email}}",
          "mapping": {
            "questionType": "object",
            "responseType": "object",
            "nestedFields": true
          }
        },
        "TABLE_ARRAY": {
          "id": "TABLE_ARRAY",
          "name": "Tabella Dinamica",
          "description": "Array di oggetti che si espande in righe di tabella",
          "syntax": "{{nomeArray.campo}}",
          "category": "table",
          "formFieldType": "table",
          "dataType": "array",
          "example": "{{items.name}}",
          "mapping": {
            "questionType": "table",
            "responseType": "array",
            "columns": []
          }
        },
        "TABLE_INDEX": {
          "id": "TABLE_INDEX",
          "name": "Indice Riga Tabella",
          "description": "Numero di riga nella tabella (1, 2, 3...)",
          "syntax": "{{nomeArray.#}} o {{nomeArray.index}}",
          "category": "table",
          "formFieldType": "table",
          "dataType": "number",
          "example": "{{items.#}}",
          "mapping": {
            "questionType": "table",
            "responseType": "auto",
            "autoGenerated": true
          }
        },
        "CONDITIONAL_BOOLEAN": {
          "id": "CONDITIONAL_BOOLEAN",
          "name": "Condizionale Vero/Falso",
          "description": "Mostra/nasconde contenuto basato su valore booleano",
          "syntax": "{{#if variabile}}...{{/if}}",
          "category": "conditional",
          "formFieldType": "boolean",
          "dataType": "boolean",
          "example": "{{#if isApproved}}...{{/if}}",
          "mapping": {
            "questionType": "boolean",
            "responseType": "boolean"
          }
        },
        "CONDITIONAL_WITH_ELSE": {
          "id": "CONDITIONAL_WITH_ELSE",
          "name": "Condizionale con Alternativa",
          "description": "Condizionale con blocco else",
          "syntax": "{{#if variabile}}...{{else}}...{{/if}}",
          "category": "conditional",
          "formFieldType": "boolean",
          "dataType": "boolean",
          "example": "{{#if isPaid}}...{{else}}...{{/if}}",
          "mapping": {
            "questionType": "boolean",
            "responseType": "boolean",
            "hasElse": true
          }
        }
      }
    }
  },
  "variableTypesList": [
    {
      "id": "SIMPLE_TEXT",
      "name": "Testo Semplice",
      "description": "Variabile testuale singola",
      "syntax": "{{nomeVariabile}}",
      "category": "text",
      "formFieldType": "text",
      "dataType": "string",
      "icon": "text",
      "color": "#3B82F6",
      "mapping": {
        "questionType": "text",
        "responseType": "string",
        "validation": {
          "required": false,
          "minLength": 0,
          "maxLength": null
        }
      }
    },
    {
      "id": "OBJECT_PROPERTY",
      "name": "Proprietà Oggetto",
      "description": "Accesso a proprietà di oggetti annidati",
      "syntax": "{{oggetto.proprietà}}",
      "category": "text",
      "formFieldType": "object",
      "dataType": "object",
      "icon": "object",
      "color": "#8B5CF6",
      "mapping": {
        "questionType": "object",
        "responseType": "object",
        "nestedFields": true,
        "validation": {
          "required": false
        }
      }
    },
    {
      "id": "TABLE_ARRAY",
      "name": "Tabella Dinamica",
      "description": "Array di oggetti che si espande in righe di tabella",
      "syntax": "{{nomeArray.campo}}",
      "category": "table",
      "formFieldType": "table",
      "dataType": "array",
      "icon": "table",
      "color": "#10B981",
      "mapping": {
        "questionType": "table",
        "responseType": "array",
        "columns": [],
        "validation": {
          "required": false,
          "minRows": 0,
          "maxRows": null
        }
      }
    },
    {
      "id": "TABLE_INDEX",
      "name": "Indice Riga Tabella",
      "description": "Numero di riga nella tabella (1, 2, 3...)",
      "syntax": "{{nomeArray.#}} o {{nomeArray.index}}",
      "category": "table",
      "formFieldType": "table",
      "dataType": "number",
      "icon": "number",
      "color": "#F59E0B",
      "mapping": {
        "questionType": "table",
        "responseType": "auto",
        "autoGenerated": true,
        "validation": {
          "readOnly": true
        }
      }
    },
    {
      "id": "CONDITIONAL_BOOLEAN",
      "name": "Condizionale Vero/Falso",
      "description": "Mostra/nasconde contenuto basato su valore booleano",
      "syntax": "{{#if variabile}}...{{/if}}",
      "category": "conditional",
      "formFieldType": "boolean",
      "dataType": "boolean",
      "icon": "toggle",
      "color": "#EF4444",
      "mapping": {
        "questionType": "boolean",
        "responseType": "boolean",
        "validation": {
          "required": false
        }
      }
    },
    {
      "id": "CONDITIONAL_WITH_ELSE",
      "name": "Condizionale con Alternativa",
      "description": "Condizionale con blocco else",
      "syntax": "{{#if variabile}}...{{else}}...{{/if}}",
      "category": "conditional",
      "formFieldType": "boolean",
      "dataType": "boolean",
      "icon": "toggle-else",
      "color": "#EC4899",
      "mapping": {
        "questionType": "boolean",
        "responseType": "boolean",
        "hasElse": true,
        "validation": {
          "required": false
        }
      }
    }
  ],
  "questionTypeMapping": {
    "text": {
      "variableTypes": ["SIMPLE_TEXT", "OBJECT_PROPERTY"],
      "default": "SIMPLE_TEXT",
      "responseStructure": {
        "type": "string",
        "example": "Mario Rossi"
      }
    },
    "table": {
      "variableTypes": ["TABLE_ARRAY", "TABLE_INDEX"],
      "default": "TABLE_ARRAY",
      "responseStructure": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {}
        },
        "example": [{ "name": "Prodotto A", "qty": 2, "price": "100 €" }]
      }
    },
    "boolean": {
      "variableTypes": ["CONDITIONAL_BOOLEAN", "CONDITIONAL_WITH_ELSE"],
      "default": "CONDITIONAL_BOOLEAN",
      "responseStructure": {
        "type": "boolean",
        "example": true
      }
    }
  },
  "formFieldConfig": {
    "SIMPLE_TEXT": {
      "component": "TextInput",
      "props": {
        "type": "text",
        "placeholder": "Inserisci testo"
      },
      "validation": {
        "required": false
      }
    },
    "OBJECT_PROPERTY": {
      "component": "ObjectInput",
      "props": {
        "fields": []
      },
      "validation": {
        "required": false
      }
    },
    "TABLE_ARRAY": {
      "component": "TableInput",
      "props": {
        "columns": [],
        "allowAdd": true,
        "allowRemove": true
      },
      "validation": {
        "required": false,
        "minRows": 0
      }
    },
    "CONDITIONAL_BOOLEAN": {
      "component": "BooleanInput",
      "props": {
        "type": "checkbox",
        "label": "Attivo"
      },
      "validation": {
        "required": false
      }
    },
    "CONDITIONAL_WITH_ELSE": {
      "component": "BooleanInput",
      "props": {
        "type": "radio",
        "options": ["true", "false"]
      },
      "validation": {
        "required": false
      }
    }
  }
}
